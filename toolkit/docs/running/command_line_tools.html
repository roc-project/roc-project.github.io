
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Command-line tools &#8212; Roc Toolkit 0.1.5</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/roc.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="/analytics.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PulseAudio modules" href="pulseaudio_modules.html" />
    <link rel="prev" title="Running" href="../running.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pulseaudio_modules.html" title="PulseAudio modules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../running.html" title="Running"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Roc Toolkit 0.1.5</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../running.html" accesskey="U">Running</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="command-line-tools">
<h1>Command-line tools<a class="headerlink" href="#command-line-tools" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of contents:</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id1">Overview</a></li>
<li><a class="reference internal" href="#building-and-installing" id="id2">Building and installing</a></li>
<li><a class="reference internal" href="#running-receiver" id="id3">Running receiver</a></li>
<li><a class="reference internal" href="#running-sender" id="id4">Running sender</a></li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id1">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Roc provides a set of command-line tools, the most important of which are roc-recv and roc-send.</p>
<p>The roc-send tool allows to grab an audio stream from a file or an audio device like a microphone or record the system output sound and send it to a remote receiver.</p>
<p>The roc-recv tool allows to receive audio streams from a single or multiple senders, mix all streams into one, and play on an audio device or write to an audio file.</p>
</div>
<div class="section" id="building-and-installing">
<h2><a class="toc-backref" href="#id2">Building and installing</a><a class="headerlink" href="#building-and-installing" title="Permalink to this headline">¶</a></h2>
<p>See our <a class="reference internal" href="../building.html"><span class="doc">Building</span></a> page for details. In particular, the <a class="reference internal" href="../building/user_cookbook.html"><span class="doc">User cookbook</span></a> page provides examples for popular distros.</p>
<p>After build, the tools can be found in the <code class="docutils literal notranslate"><span class="pre">./bin/&lt;host&gt;</span></code> directory, for example <code class="docutils literal notranslate"><span class="pre">./bin/x86_64-pc-linux-gnu</span></code>. You can either use tools from this directory or install them into the system using &quot;scons install&quot; command described by the link above.</p>
</div>
<div class="section" id="running-receiver">
<h2><a class="toc-backref" href="#id3">Running receiver</a><a class="headerlink" href="#running-receiver" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../manuals/roc_recv.html"><span class="doc">roc-recv manual page</span></a> for the full list of options and some examples.</p>
<p>Here is an example of starting the receiver that listens on all interfaces on two UDP ports 10001 (for source packets) and 10002 (for repair packets) and plays the received audio on the default audio device.</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ roc-recv -vv -s rtp+rs8m::10001 -r rs8m::10002
[info] roc_sndio: initializing pulseaudio backend
[info] roc_sndio: initializing sox backend
[debug] roc_recv: pool: initializing: object_size=2064 poison=0
[debug] roc_recv: pool: initializing: object_size=2576 poison=0
[debug] roc_recv: pool: initializing: object_size=608 poison=0
[debug] roc_sndio: pulseaudio sink: opening sink: device=(null)
[debug] roc_sndio: pulseaudio sink: opening stream: device=(null) n_channels=2 sample_rate=48000
[debug] roc_sndio: pulseaudio sink: stream_latency=0
[info] roc_netio: udp receiver: opened port 0.0.0.0:10001
[info] roc_netio: udp receiver: opened port 0.0.0.0:10002
[debug] roc_sndio: pump: starting
[debug] roc_netio: transceiver: starting event loop
[info] roc_pipeline: receiver: creating session
[debug] roc_packet: delayed reader: initializing: delay=8820
[debug] roc_fec: of decoder: initializing Reed-Solomon decoder
[debug] roc_audio: watchdog: initializing: max_blank_duration=96000 max_drops_duration=96000 drop_detection_window=14400
[debug] roc_audio: resampler: initializing: window_interp=128 window_size=32 frame_size=640 channels_num=2
[debug] roc_audio: resampler reader: initializing window
[debug] roc_audio: latency monitor: initializing: target_latency=8820 in_rate=44100 out_rate=48000
[debug] roc_packet: router: detected new stream: source=1995914915 flags=0x8u
[debug] roc_audio: depacketizer: ts=320 loss_ratio=0.00000
[debug] roc_audio: watchdog: status: bbbbbbbbbbbbbbbbbbbb
[debug] roc_packet: router: detected new stream: source=0 flags=0x10u
[debug] roc_packet: delayed reader: initial queue: delay=8820 queue=9270 packets=30
[debug] roc_packet: delayed reader: trimmed queue: delay=8820 queue=8961 packets=29
[debug] roc_fec: fec reader: update sblen, cur_sbl=0 new_sbl=20
[debug] roc_audio: depacketizer: got first packet: zero_samples=9600
[debug] roc_audio: latency monitor: latency=8950 target=8820 fe=1.00000 trim_fe=1.00000 adj_fe=0.91875
[debug] roc_audio: watchdog: status: bbbbbbbbbb..........
[debug] roc_fec: fec reader: repair queue: dropped=10
[debug] roc_fec: fec reader: got first packet in a block, start decoding: n_packets_before=19 sn=49902 sbn=50206
[debug] roc_audio: latency monitor: latency=8787 target=8820 fe=0.99999 trim_fe=0.99999 adj_fe=0.91874
[debug] roc_sndio: pulseaudio sink: stream_latency=1792
[debug] roc_audio: latency monitor: latency=8613 target=8820 fe=0.99981 trim_fe=0.99981 adj_fe=0.91858
[debug] roc_audio: latency monitor: latency=8759 target=8820 fe=0.99980 trim_fe=0.99980 adj_fe=0.91856
[debug] roc_sndio: pulseaudio sink: stream_latency=1642
...
</pre></div>
</div>
</div>
<div class="section" id="running-sender">
<h2><a class="toc-backref" href="#id4">Running sender</a><a class="headerlink" href="#running-sender" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../manuals/roc_send.html"><span class="doc">roc-send manual page</span></a> for the full list of options and some examples.</p>
<p>Here is an example of starting the sender reads audio stream from a WAV file and sends it to the receiver on 127.0.0.1 (locahost) with two UDP ports 10001 (for source packets) and 10002 (for repair packets).</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ roc-send -vv -s rtp+rs8m:127.0.0.1:10001 -r rs8m:127.0.0.1:10002 -i ./file.wav
[info] roc_sndio: initializing pulseaudio backend
[info] roc_sndio: initializing sox backend
[debug] roc_send: pool: initializing: object_size=2064 poison=0
[debug] roc_send: pool: initializing: object_size=2576 poison=0
[debug] roc_send: pool: initializing: object_size=608 poison=0
[info] roc_sndio: sox source: opening: driver=(null) input=/home/victor/stash/loituma.wav
[info] roc_sndio: [sox] formats.c: detected file format type `wav&#39;
[info] roc_sndio: [sox] wav.c: Searching for 66 6d 74 20
[info] roc_sndio: [sox] wav.c: WAV Chunk fmt
[info] roc_sndio: [sox] wav.c: Searching for 64 61 74 61
[info] roc_sndio: [sox] wav.c: WAV Chunk LIST
[info] roc_sndio: [sox] wav.c: WAV Chunk data
[info] roc_sndio: [sox] wav.c: Reading Wave file: Microsoft PCM format, 2 channels, 44100 samp/sec
[info] roc_sndio: [sox] wav.c:         176400 byte/sec, 4 block align, 16 bits/samp, 28832256 data bytes
[info] roc_sndio: [sox] wav.c:         7208064 Samps/chans
[info] roc_sndio: [sox] wav.c: Searching for 4c 49 53 54
[info] roc_sndio: sox source: in_bits=16 out_bits=32 in_rate=44100 out_rate=0 in_ch=2, out_ch=0, is_file=1
[info] roc_netio: udp sender: opened port 0.0.0.0:48925
[debug] roc_fec: of encoder: initializing Reed-Solomon encoder
[debug] roc_sndio: pump: starting
[debug] roc_netio: transceiver: starting event loop
[debug] roc_packet: router: detected new stream: source=1995914915 flags=0x8u
[debug] roc_packet: router: detected new stream: source=0 flags=0x10u
...
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo80.png" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_project.html">About project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building.html">Building</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../running.html">Running</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Command-line tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="pulseaudio_modules.html">PulseAudio modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manuals.html">Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../portability.html">Portability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals.html">Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pulseaudio_modules.html" title="PulseAudio modules"
             >next</a> |</li>
        <li class="right" >
          <a href="../running.html" title="Running"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Roc Toolkit 0.1.5</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../running.html" >Running</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Roc authors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>